(()=>{"use strict";var e={174:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},332:(e,t,n)=>{e.exports=n.p+"6163c2039d1f0eb8d7ca.jpg"},186:(e,t,n)=>{e.exports=n.p+"03b78ada3425e9132ff3.svg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="",n.b=document.baseURI||self.location.href,(()=>{var e=n(174),t=n.n(e),r=new URL(n(186),n.b),o=new URL(n(332),n.b);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t()(r),t()(o);var a=function(){function e(t,n){var r=this,o=t.data,i=t.userId,a=t.handleCardClick,c=t.handleLikeCard,s=t.handleDeleteClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"deleteCardHandler",(function(){r._element.remove(),r._element=null})),u(this,"addLike",(function(){r._btnLike.classList.add("elements__like-button_active")})),u(this,"deleteLike",(function(){r._btnLike.classList.remove("elements__like-button_active")})),this._name=o.name,this._link=o.link,this._likes=o.likes,this._id=o._id,this._ownerId=o.owner._id,this._userId=i,this._cardSelector=n,this._handleCardClick=a,this._handleDeleteClick=s,this._handleLikeCard=c}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__item").cloneNode(!0)}},{key:"_hideDeleteButton",value:function(){this._ownerId!==this._userId&&this._btnDelete.remove()}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardElementImage=this._element.querySelector(".elements__photo"),this._btnLike=this._element.querySelector(".elements__like-button"),this._likesCount=this._element.querySelector(".elements__like-count"),this._btnDelete=this._element.querySelector(".elements__pic-bin"),this._setEventListeners(),this._element.querySelector(".elements__name").textContent=this._name,this._cardElementImage.src=this._link,this._cardElementImage.alt="Фото ".concat(this._name),this.setLike(this._likes),this._checkOwnLike(),this._hideDeleteButton(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._btnDelete.addEventListener("click",(function(){e._handleDeleteClick()})),this._cardElementImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),this._btnLike.addEventListener("click",(function(){e._handleLikeCard()}))}},{key:"isLiked",value:function(){var e=this;return this._likes.find((function(t){return t._id===e._userId}))}},{key:"_checkOwnLike",value:function(){this.isLiked()?this.addLike():this.deleteLike()}},{key:"setLike",value:function(e){this._likes=e,this._likesCount.textContent=this._likes.length}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButtonSelector=t.submitButtonSelector,this._btnSubmit=this._form.querySelector(this._submitButtonSelector),this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e){e.classList.add(this._inputErrorClass);var t=this._form.querySelector(".".concat(e.id,"-input-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){e.classList.remove(this._inputErrorClass);var t=this._form.querySelector(".".concat(e.id,"-input-error"));t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._btnSubmit.disabled=!0,this._btnSubmit.classList.add(this._inactiveButtonClass)):(this._btnSubmit.disabled=!1,this._btnSubmit.classList.remove(this._inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners(),this._form.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"removeInputErrors",value:function(){var e=this;this._toggleButtonState(this._inputList),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._buttonClose=this._popup.querySelector(".popup__close-button"),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.closePopup()}},{key:"_handleOverlayClose",value:function(e){e.target.classList.contains("popup_opened")&&this.closePopup()}},{key:"setEventListeners",value:function(){var e=this;this._buttonClose.addEventListener("click",(function(){e.closePopup()})),this._popup.addEventListener("mousedown",(function(t){e._handleOverlayClose(t)}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function m(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(e,t){var n,r=t.submitFormHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFormHandler=r,n._popupForm=n._popup.querySelector(".popup__form"),n._popupInput=n._popup.querySelectorAll(".popup__input"),n._buttonSubmit=n._popup.querySelector(".popup__button-submit"),n._buttonSubmitText=n._buttonSubmit.textContent,n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._userValues={},this._popupInput.forEach((function(t){e._userValues[t.name]=t.value})),this._userValues}},{key:"renderLoading",value:function(e){this._buttonSubmit.textContent=e?"Сохранение...":this._buttonSubmitText}},{key:"setEventListeners",value:function(){var e=this;y(k(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._submitFormHandler(e._getInputValues())}))}},{key:"closePopup",value:function(){y(k(u.prototype),"closePopup",this).call(this),this._popupForm.reset()}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function L(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._imgPopup=t._popup.querySelector(".popup__fullscreen-photo"),t._captionPopup=t._popup.querySelector(".popup__fullscreen-caption"),t}return t=u,(n=[{key:"openPopup",value:function(e,t){this._captionPopup.textContent=e,this._imgPopup.src=t,this._imgPopup.alt="Фото: ".concat(e),E(C(u.prototype),"openPopup",this).call(this)}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){var n=t.name,r=t.about,o=t.userAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userJob=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userData={userName:this._userName.textContent,userInfo:this._userJob.textContent},this._userData}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userJob.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._userAvatar.src=e.avatar}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=D(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function D(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function A(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return A(this,e)});function u(e,t){var n,r=t.handleSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleSubmit=r,n._setEvent=n._setEvent.bind(U(n)),n}return t=u,(n=[{key:"handleSubmitConfirm",value:function(e){this._handleSubmit=e}},{key:"_setEvent",value:function(e){e.preventDefault(),this._handleSubmit()}},{key:"openPopup",value:function(){x(V(u.prototype),"openPopup",this).call(this),this._popup.addEventListener("submit",this._setEvent)}},{key:"closePopup",value:function(){x(V(u.prototype),"closePopup",this).call(this),this._popup.removeEventListener("submit",this._setEvent)}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"updateUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._checkResponse(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"changeUserAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._checkResponse(e)}))}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),J={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup_error_visible"},M=document.querySelector(".profile__edit-button"),G=document.querySelector(".popup_type_edit-form"),z=document.querySelector(".popup__input_name"),Q=document.querySelector(".popup__input_job"),$=document.querySelector(".popup_type_add-form"),K=document.querySelector(".profile__add-button"),W=document.querySelector(".popup_type_avatar-form"),X=document.querySelector(".profile__edit-avatar-button");function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=new F({url:"https://mesto.nomoreparties.co/v1/cohort-49",headers:{authorization:"59f6a1ae-0384-499e-aebb-f4cb2d0443c0","Content-Type":"application/json"}}),ee=null,te=new p({items:[],renderer:function(e){var t=pe(e);te.addItem(t)}},".elements__card"),ne=new R({name:".profile__name",about:".profile__about",userAvatar:".profile__avatar"}),re=new s(J,G);re.enableValidation();var oe=new s(J,$);oe.enableValidation();var ie=new s(J,W);ie.enableValidation();var ue=new j(".popup_type_fullscreen-photo");ue.setEventListeners();var ae=new g(".popup_type_edit-form",{submitFormHandler:function(e){ae.renderLoading(!0),Z.updateUserInfo(e).then((function(e){ne.setUserInfo(e),ae.closePopup()})).catch((function(e){console.log(e)})).finally((function(){ae.renderLoading(!1)}))}});ae.setEventListeners(),M.addEventListener("click",(function(){var e;e=ne.getUserInfo(),z.value=e.userName,Q.value=e.userInfo,ae.openPopup(),re.removeInputErrors()}));var ce=new g(".popup_type_add-form",{submitFormHandler:function(e){ce.renderLoading(!0),Z.addCard(e).then((function(e){var t=pe(e);te.addItem(t),ce.closePopup()})).catch((function(e){console.log(e)})).finally((function(){ce.renderLoading(!1)}))}});ce.setEventListeners(),K.addEventListener("click",(function(){oe.removeInputErrors(),ce.openPopup()}));var se=new g(".popup_type_avatar-form",{submitFormHandler:function(e){se.renderLoading(!0),Z.changeUserAvatar(e).then((function(e){ne.setUserAvatar(e),se.closePopup()})).catch((function(e){console.log(e)})).finally((function(){se.renderLoading(!1)}))}});se.setEventListeners(),X.addEventListener("click",(function(){se.openPopup(),ie.removeInputErrors()}));var le=new H(".popup_type_delete-card",{handleSubmit:function(e){Z.deleteCard(e).then((function(){le.closePopup()})).catch((function(e){console.log(e)}))}});le.setEventListeners(),Promise.all([Z.getUserInfo(),Z.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ee=o._id,ne.setUserInfo(o),ne.setUserAvatar(o),te.renderItems(i.reverse())})).catch((function(e){console.log(e)}));var pe=function(e){var t=new a({data:e,userId:ee,handleCardClick:function(){ue.openPopup(e.name,e.link)},handleDeleteClick:function(){le.openPopup(),le.handleSubmitConfirm((function(){Z.deleteCard(t._id).then((function(){t.deleteCardHandler(),le.closePopup()})).catch((function(e){console.log(e)}))}))},handleLikeCard:function(){t.isLiked()?Z.deleteLike(t._id).then((function(e){t.deleteLike(),t.setLike(e.likes)})).catch((function(e){console.log(e)})):Z.addLike(t._id).then((function(e){t.addLike(),t.setLike(e.likes)})).catch((function(e){console.log(e)}))}},".card-template");return t.generateCard()}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQUssU0FBQ2hKLEdBQ0gyTCxFQUFLL0ksYUFDTCtJLEVBQUt2SixRQUFRcEMsRUFBS2dCLE1BQ3JCLElBQ0FnSyxPQUFNLFNBQUNDLEdBQ0pDLFFBQVFDLElBQUlGLEVBQ2YsSUFHTGxCLEVBQUlwSCxRQUFRZ0osRUFBSzFLLEtBQ1orSCxNQUFLLFNBQUNoSixHQUNIMkwsRUFBS2hKLFVBQ0xnSixFQUFLdkosUUFBUXBDLEVBQUtnQixNQUNyQixJQUNBZ0ssT0FBTSxTQUFDQyxHQUNKQyxRQUFRQyxJQUFJRixFQUNmLEdBRVosR0FFRCxrQkFDSixPQUFPVSxFQUFLWSxjQUNYLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL25vZGVfbW9kdWxlcy9odG1sLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL21lc3RvLy4vc3JjL2luZGV4Lmh0bWwiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbGl0cy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICBpZiAoIXVybCkge1xuICAgIHJldHVybiB1cmw7XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlLCBuby1wYXJhbS1yZWFzc2lnblxuXG5cbiAgdXJsID0gU3RyaW5nKHVybC5fX2VzTW9kdWxlID8gdXJsLmRlZmF1bHQgOiB1cmwpO1xuXG4gIGlmIChvcHRpb25zLmhhc2gpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB1cmwgKz0gb3B0aW9ucy5oYXNoO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMubWF5YmVOZWVkUXVvdGVzICYmIC9bXFx0XFxuXFxmXFxyIFwiJz08PmBdLy50ZXN0KHVybCkpIHtcbiAgICByZXR1cm4gXCJcXFwiXCIuY29uY2F0KHVybCwgXCJcXFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIl9fd2VicGFja19yZXF1aXJlX18uYiA9IGRvY3VtZW50LmJhc2VVUkkgfHwgc2VsZi5sb2NhdGlvbi5ocmVmO1xuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBubyBqc29ucCBmdW5jdGlvbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19IVE1MX0xPQURFUl9HRVRfU09VUkNFX0ZST01fSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvaHRtbC1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiO1xudmFyIF9fX0hUTUxfTE9BREVSX0lNUE9SVF8wX19fID0gbmV3IFVSTChcIi4vaW1hZ2VzL2xvZ29fbWVzdG8uc3ZnXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fSFRNTF9MT0FERVJfSU1QT1JUXzFfX18gPSBuZXcgVVJMKFwiLi9pbWFnZXMva3VzdG8uanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG4vLyBNb2R1bGVcbnZhciBfX19IVE1MX0xPQURFUl9SRVBMQUNFTUVOVF8wX19fID0gX19fSFRNTF9MT0FERVJfR0VUX1NPVVJDRV9GUk9NX0lNUE9SVF9fXyhfX19IVE1MX0xPQURFUl9JTVBPUlRfMF9fXyk7XG52YXIgX19fSFRNTF9MT0FERVJfUkVQTEFDRU1FTlRfMV9fXyA9IF9fX0hUTUxfTE9BREVSX0dFVF9TT1VSQ0VfRlJPTV9JTVBPUlRfX18oX19fSFRNTF9MT0FERVJfSU1QT1JUXzFfX18pO1xudmFyIGNvZGUgPSBcIjwhRE9DVFlQRSBodG1sPiA8aHRtbCBsYW5nPVxcXCJydVxcXCI+IDxoZWFkPiA8bWV0YSBjaGFyc2V0PVxcXCJVVEYtOFxcXCI+IDxtZXRhIG5hbWU9XFxcInZpZXdwb3J0XFxcIiBjb250ZW50PVxcXCJ3aWR0aD1kZXZpY2Utd2lkdGgsaW5pdGlhbC1zY2FsZT0xXFxcIj4gPG1ldGEgbmFtZT1cXFwiYXV0aG9yXFxcIiBjb250ZW50PVxcXCJTZXJnZXkgUG9ka29semluXFxcIj4gPHRpdGxlPtCc0LXRgdGC0L48L3RpdGxlPiA8L2hlYWQ+IDxib2R5IGNsYXNzPVxcXCJyb290XFxcIj4gPGhlYWRlciBjbGFzcz1cXFwiaGVhZGVyXFxcIj4gPGltZyBzcmM9XFxcIlwiICsgX19fSFRNTF9MT0FERVJfUkVQTEFDRU1FTlRfMF9fXyArIFwiXFxcIiBjbGFzcz1cXFwiaGVhZGVyX19sb2dvXFxcIiBhbHQ9XFxcItCb0L7Qs9C+0YLQuNC/INC90LDQtNC/0LjRgdGM0Y4g0JzQtdGB0YLQvlxcXCI+IDwvaGVhZGVyPiA8bWFpbiBjbGFzcz1cXFwibWFpblxcXCI+IDxzZWN0aW9uIGNsYXNzPVxcXCJwcm9maWxlXFxcIj4gPGRpdiBjbGFzcz1cXFwicHJvZmlsZV9faW5mb1xcXCI+IDxpbWcgY2xhc3M9XFxcInByb2ZpbGVfX2F2YXRhclxcXCIgc3JjPVxcXCJcIiArIF9fX0hUTUxfTE9BREVSX1JFUExBQ0VNRU5UXzFfX18gKyBcIlxcXCIgYWx0PVxcXCLQpNC+0YLQvtCz0YDQsNGE0LjRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cXFwiPiA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcInByb2ZpbGVfX2VkaXQtYXZhdGFyLWJ1dHRvblxcXCI+PC9idXR0b24+IDxkaXYgY2xhc3M9XFxcInByb2ZpbGVfX2NvbnRhaW5lclxcXCI+IDxkaXYgY2xhc3M9XFxcInByb2ZpbGVfX2NvbnRhaW5lci13cmFwcFxcXCI+IDxoMSBjbGFzcz1cXFwicHJvZmlsZV9fbmFtZVxcXCI+0JbQsNC6PC9oMT4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJwcm9maWxlX19lZGl0LWJ1dHRvblxcXCI+PC9idXR0b24+IDwvZGl2PiA8cCBjbGFzcz1cXFwicHJvZmlsZV9fYWJvdXRcXFwiPtCY0YHRgTwvcD4gPC9kaXY+IDwvZGl2PiA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcInByb2ZpbGVfX2FkZC1idXR0b25cXFwiPjwvYnV0dG9uPiA8L3NlY3Rpb24+IDxzZWN0aW9uIGNsYXNzPVxcXCJlbGVtZW50c1xcXCI+IDx1bCBjbGFzcz1cXFwiZWxlbWVudHNfX2NhcmRcXFwiPiA8L3VsPiA8L3NlY3Rpb24+IDwvbWFpbj4gPGZvb3RlciBjbGFzcz1cXFwiZm9vdGVyXFxcIj4gPHAgY2xhc3M9XFxcImZvb3Rlcl9fY29weXJpZ2h0c1xcXCI+JmNvcHk7IDIwMjAgTWVzdG8gUnVzc2lhPC9wPiA8L2Zvb3Rlcj4gPGRpdiBjbGFzcz1cXFwicG9wdXAgcG9wdXBfdHlwZV9lZGl0LWZvcm1cXFwiPiA8ZGl2IGNsYXNzPVxcXCJwb3B1cF9fY29udGFpbmVyXFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJwb3B1cF9fY2xvc2UtYnV0dG9uXFxcIj48L2J1dHRvbj4gPGgyIGNsYXNzPVxcXCJwb3B1cF9fcmVkLXByb2ZpbGVcXFwiPtCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINC/0YDQvtGE0LjQu9GMPC9oMj4gPGZvcm0gY2xhc3M9XFxcInBvcHVwX19mb3JtIHBvcHVwX19mb3JtX3R5cGUtZWRpdFxcXCIgbmFtZT1cXFwiZWRpdC1wcm9maWxlLWZvcm1cXFwiIG5vdmFsaWRhdGU+IDxpbnB1dCBjbGFzcz1cXFwicG9wdXBfX2lucHV0IHBvcHVwX19pbnB1dF9uYW1lXFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIiB2YWx1ZT1cXFwi0JbQsNC6LdCY0LIg0JrRg9GB0YLQvlxcXCIgaWQ9XFxcIm5hbWVcXFwiIG5hbWU9XFxcIm5hbWVcXFwiIHBsYWNlaG9sZGVyPVxcXCLQmNC80Y9cXFwiIG1pbmxlbmd0aD1cXFwiMlxcXCIgbWF4bGVuZ3RoPVxcXCI0MFxcXCIgcmVxdWlyZWQ+IDxzcGFuIGNsYXNzPVxcXCJwb3B1cF9faW5wdXQtZXJyb3IgbmFtZS1pbnB1dC1lcnJvclxcXCI+PC9zcGFuPiA8aW5wdXQgY2xhc3M9XFxcInBvcHVwX19pbnB1dCBwb3B1cF9faW5wdXRfam9iXFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIiB2YWx1ZT1cXFwi0JjRgdGB0LvQtdC00L7QstCw0YLQtdC70Ywg0L7QutC10LDQvdCwXFxcIiBpZD1cXFwiYWJvdXRcXFwiIG5hbWU9XFxcImFib3V0XFxcIiBwbGFjZWhvbGRlcj1cXFwi0J4g0YHQtdCx0LVcXFwiIG1pbmxlbmd0aD1cXFwiMlxcXCIgbWF4bGVuZ3RoPVxcXCIyMDBcXFwiIHJlcXVpcmVkPiA8c3BhbiBjbGFzcz1cXFwicG9wdXBfX2lucHV0LWVycm9yIGFib3V0LWlucHV0LWVycm9yXFxcIj48L3NwYW4+IDxidXR0b24gdHlwZT1cXFwic3VibWl0XFxcIiBjbGFzcz1cXFwicG9wdXBfX2J1dHRvbiBwb3B1cF9fYnV0dG9uLXN1Ym1pdFxcXCI+0KHQvtGF0YDQsNC90LjRgtGMPC9idXR0b24+IDwvZm9ybT4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPVxcXCJwb3B1cCBwb3B1cF90eXBlX2FkZC1mb3JtXFxcIj4gPGRpdiBjbGFzcz1cXFwicG9wdXBfX2NvbnRhaW5lciBwb3B1cF9fY29udGFpbmVyX3BsYWNlXFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJwb3B1cF9fY2xvc2UtYnV0dG9uIHBvcHVwX19jbG9zZS1idXR0b25fcGxhY2VcXFwiPjwvYnV0dG9uPiA8aDIgY2xhc3M9XFxcInBvcHVwX19hZGQtaGVhZGVyXFxcIj7QndC+0LLQvtC1INC80LXRgdGC0L48L2gyPiA8Zm9ybSBjbGFzcz1cXFwicG9wdXBfX2Zvcm0gcG9wdXBfX2Zvcm1fdHlwZV9hZGQtY2FyZFxcXCIgbmFtZT1cXFwiYWRkLWNhcmQtZm9ybVxcXCIgbm92YWxpZGF0ZT4gPGlucHV0IGNsYXNzPVxcXCJwb3B1cF9faW5wdXQgcG9wdXBfX2lucHV0X3BsYWNlLW5hbWVcXFwiIHR5cGU9XFxcInRleHRcXFwiIG5hbWU9XFxcIm5hbWVcXFwiIGlkPVxcXCJwbGFjZS1uYW1lXFxcIiBwbGFjZWhvbGRlcj1cXFwi0J3QsNC30LLQsNC90LjQtVxcXCIgbWlubGVuZ3RoPVxcXCIyXFxcIiBtYXhsZW5ndGg9XFxcIjMwXFxcIiByZXF1aXJlZD4gPHNwYW4gY2xhc3M9XFxcInBvcHVwX19pbnB1dC1lcnJvciBwbGFjZS1uYW1lLWlucHV0LWVycm9yXFxcIj48L3NwYW4+IDxpbnB1dCBjbGFzcz1cXFwicG9wdXBfX2lucHV0IHBvcHVwX19pbnB1dF9wbGFjZS1saW5rXFxcIiB0eXBlPVxcXCJ1cmxcXFwiIG5hbWU9XFxcImxpbmtcXFwiIGlkPVxcXCJwbGFjZS1saW5rXFxcIiBwbGFjZWhvbGRlcj1cXFwi0KHRgdGL0LvQutCwINC90LAg0LrQsNGA0YLQuNC90LrRg1xcXCIgcmVxdWlyZWQ+IDxzcGFuIGNsYXNzPVxcXCJwb3B1cF9faW5wdXQtZXJyb3IgcGxhY2UtbGluay1pbnB1dC1lcnJvclxcXCI+PC9zcGFuPiA8YnV0dG9uIHR5cGU9XFxcInN1Ym1pdFxcXCIgY2xhc3M9XFxcInBvcHVwX19idXR0b24gcG9wdXBfX2J1dHRvbi1zdWJtaXQgcG9wdXBfX2J1dHRvbl9kaXNhYmxlZFxcXCI+0KHQvtC30LTQsNGC0Yw8L2J1dHRvbj4gPC9mb3JtPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9XFxcInBvcHVwIHBvcHVwX3R5cGVfZnVsbHNjcmVlbi1waG90b1xcXCI+IDxkaXYgY2xhc3M9XFxcInBvcHVwX19waG90by1jb250YWluZXJcXFwiPiA8YnV0dG9uIGNsYXNzPVxcXCJwb3B1cF9fY2xvc2UtYnV0dG9uXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiPjwvYnV0dG9uPiA8aW1nIGNsYXNzPVxcXCJwb3B1cF9fZnVsbHNjcmVlbi1waG90b1xcXCIgYWx0PVxcXCJcXFwiIHNyYz1cXFwiI1xcXCI+IDxmaWdjYXB0aW9uIGNsYXNzPVxcXCJwb3B1cF9fZnVsbHNjcmVlbi1jYXB0aW9uXFxcIj48L2ZpZ2NhcHRpb24+IDwvZGl2PiA8L2Rpdj4gPHRlbXBsYXRlIGNsYXNzPVxcXCJjYXJkLXRlbXBsYXRlXFxcIiBpZD1cXFwiY2FyZC10ZW1wbGF0ZVxcXCI+IDxsaSBjbGFzcz1cXFwiZWxlbWVudHNfX2l0ZW0gY2FyZFxcXCI+IDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiZWxlbWVudHNfX3BpYy1iaW5cXFwiPjwvYnV0dG9uPiA8aW1nIGNsYXNzPVxcXCJlbGVtZW50c19fcGhvdG9cXFwiIHNyYz1cXFwiI1xcXCIgYWx0PVxcXCJcXFwiPiA8ZGl2IGNsYXNzPVxcXCJlbGVtZW50c19fY29udGFpbmVyXFxcIj4gPHAgY2xhc3M9XFxcImVsZW1lbnRzX19uYW1lXFxcIj48L3A+IDxkaXYgY2xhc3M9XFxcImVsZW1lbnRzX19saWtlXFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJlbGVtZW50c19fbGlrZS1idXR0b25cXFwiPjwvYnV0dG9uPiA8cCBjbGFzcz1cXFwiZWxlbWVudHNfX2xpa2UtY291bnRcXFwiPjA8L3A+IDwvZGl2PiA8L2Rpdj4gPC9saT4gPC90ZW1wbGF0ZT4gPGRpdiBjbGFzcz1cXFwicG9wdXAgcG9wdXBfdHlwZV9kZWxldGUtY2FyZFxcXCI+IDxkaXYgY2xhc3M9XFxcInBvcHVwX19jb250YWluZXJcXFwiPiA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcInBvcHVwX19jbG9zZS1idXR0b25cXFwiPjwvYnV0dG9uPiA8aDIgY2xhc3M9XFxcInBvcHVwX190aXRsZVxcXCI+0JLRiyDRg9Cy0LXRgNC10L3Riz88L2gyPiA8Zm9ybSBuYW1lPVxcXCJwb3B1cFxcXCIgY2xhc3M9XFxcInBvcHVwX19mb3JtIHBvcHVwX19mb3JtX3R5cGVfZGVsZXRlXFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGNsYXNzPVxcXCJwb3B1cF9fYnV0dG9uIHBvcHVwX19idXR0b24tc3VibWl0XFxcIj7QlNCwPC9idXR0b24+IDwvZm9ybT4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPVxcXCJwb3B1cCBwb3B1cF90eXBlX2F2YXRhci1mb3JtXFxcIj4gPGRpdiBjbGFzcz1cXFwicG9wdXBfX2NvbnRhaW5lclxcXCI+IDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwicG9wdXBfX2Nsb3NlLWJ1dHRvblxcXCI+PC9idXR0b24+IDxoMiBjbGFzcz1cXFwicG9wdXBfX3RpdGxlXFxcIj7QntCx0L3QvtCy0LjRgtGMINCw0LLQsNGC0LDRgDwvaDI+IDxmb3JtIG5hbWU9XFxcInBvcHVwXFxcIiBjbGFzcz1cXFwicG9wdXBfX2Zvcm0gcG9wdXBfX2Zvcm1fdHlwZV9hdmF0YXJcXFwiPiA8aW5wdXQgY2xhc3M9XFxcInBvcHVwX19pbnB1dCBwb3B1cF9faW5wdXRfYXZhdGFyXFxcIiB0eXBlPVxcXCJ1cmxcXFwiIG5hbWU9XFxcImF2YXRhclxcXCIgaWQ9XFxcImF2YXRhclxcXCIgcmVxdWlyZWQgcGxhY2Vob2xkZXI9XFxcItCh0YHRi9C70LrQsCDQvdCwINC60LDRgNGC0LjQvdC60YNcXFwiPiA8c3BhbiBjbGFzcz1cXFwicG9wdXBfX2lucHV0LWVycm9yIGF2YXRhci1pbnB1dC1lcnJvclxcXCI+PC9zcGFuPiA8YnV0dG9uIHR5cGU9XFxcInN1Ym1pdFxcXCIgY2xhc3M9XFxcInBvcHVwX19idXR0b24gcG9wdXBfX2J1dHRvbi1zdWJtaXRcXFwiPtCh0L7RhdGA0LDQvdC40YLRjDwvYnV0dG9uPiA8L2Zvcm0+IDwvZGl2PiA8L2Rpdj4gPC9ib2R5PiA8L2h0bWw+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIiAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7ZGF0YSwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDYXJkLCBoYW5kbGVEZWxldGVDbGlja30sIGNhcmRTZWxlY3Rvcikge1xyXG4gICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNhcmQgPSBoYW5kbGVMaWtlQ2FyZDtcclxuICAgIH1cclxuXHJcbi8vIHRha2UgbWFya3VwIGZybSBIVE1MLWZpbGUgYW5kIGNsb25lIGVsZW1lbnQgXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2l0ZW0nKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRlbGV0ZS1hLWNhcmQgZnVuY3Rpb25cclxuICAgIGRlbGV0ZUNhcmRIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gICAgX2hpZGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICAgIHRoaXMuX2J0bkRlbGV0ZS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgICAvLyBjcmVhdGUgYSBjYXJkIChjb2xsZWN0IGFsbCBzZXRzKVxyXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fcGhvdG8nKTtcclxuICAgICAgdGhpcy5fYnRuTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saWtlLWJ1dHRvbicpO1xyXG4gICAgICB0aGlzLl9saWtlc0NvdW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2xpa2UtY291bnQnKTtcclxuICAgICAgdGhpcy5fYnRuRGVsZXRlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX3BpYy1iaW4nKTtcclxuICAgICAgXHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudEltYWdlLmFsdCA9IGDQpNC+0YLQviAke3RoaXMuX25hbWV9YDtcclxuXHJcbiAgICAgIHRoaXMuc2V0TGlrZSh0aGlzLl9saWtlcyk7XHJcblxyXG4gICAgICB0aGlzLl9jaGVja093bkxpa2UoKTtcclxuXHJcbiAgICAgIHRoaXMuX2hpZGVEZWxldGVCdXR0b24oKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldCBsaXN0ZW5lcnMgZm9yIGRlbGV0ZSwgbGlrZSwgcGljIGNsaWNrc1xyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICB0aGlzLl9idG5EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHt0aGlzLl9oYW5kbGVEZWxldGVDbGljaygpfSk7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspIH0pO1xyXG4gICAgICB0aGlzLl9idG5MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9oYW5kbGVMaWtlQ2FyZCgpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTGlrZWQoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9saWtlcy5maW5kKHVzZXIgPT4gdXNlci5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrT3duTGlrZSgpIHtcclxuICAgICAgICB0aGlzLmlzTGlrZWQoKSA/IHRoaXMuYWRkTGlrZSgpIDogdGhpcy5kZWxldGVMaWtlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TGlrZShkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTGlrZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9idG5MaWtlLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRzX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVMaWtlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2J0bkxpa2UuY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudHNfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGRhdGEuaW5wdXRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gZGF0YS5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9idG5TdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBkYXRhLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gZGF0YS5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IGRhdGEuZXJyb3JDbGFzcztcclxuICAgIH07XHJcblxyXG4gICAgLy9mdW5jdGlvbiBjaGVja3MgY29ycmVjdGl2ZSBpbnB1dCBmb3JtIFxyXG4gICAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZnVuY3Rpb24gYWRkcyBjbGFzcyB3aXRoIG1pc3Rha2VcclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG5cclxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0taW5wdXQtZXJyb3JgKTtcclxuICAgICAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGZ1bmN0aW9uIGRlbGV0ZXMgY2xhc3Mgd2l0aCBtaXN0YWtlXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuXHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWlucHV0LWVycm9yYCk7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGZ1bmN0aW9uIGNoZWNrcyBmb3JtIHZhbGlkaXR5IFxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gdG9nZ2xlIGJ1dHRvblxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9idG5TdWJtaXQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9idG5TdWJtaXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J0blN1Ym1pdC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9idG5TdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy9mdW5jdGlvbiBhZGRzIGxpc3RlbmVycyB0byBhbGwgaW5wdXQgZm9ybXNcclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vZnVuY3Rpb24gZmluZHMgYW5kIHNvcnRzIG91dCBhbGwgZm9ybXNcclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vZnVuY3Rpb24gZm9yIHJlc2V0aW5nIG1pc3Rha2VzIGluIGZvcm1zXHJcbiAgICByZW1vdmVJbnB1dEVycm9ycygpIHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuICBcclxuICAgIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IFxyXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuICBcclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuICB9IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IgKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuUG9wdXAoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZVBvcHVwKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgICAgIGlmKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZU92ZXJsYXlDbG9zZShldnQpIHtcclxuICAgICAgICBpZihldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKGV2dClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHtzdWJtaXRGb3JtSGFuZGxlcn0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRGb3JtSGFuZGxlciA9IHN1Ym1pdEZvcm1IYW5kbGVyO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwSW5wdXQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tc3VibWl0Jyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uU3VibWl0VGV4dCA9IHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlclZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX3BvcHVwSW5wdXQuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXNlclZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyVmFsdWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblN1Ym1pdFRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEZvcm1IYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlUG9wdXAoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9pbWdQb3B1cCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZnVsbHNjcmVlbi1waG90bycpO1xyXG4gICAgICAgIHRoaXMuX2NhcHRpb25Qb3B1cCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZnVsbHNjcmVlbi1jYXB0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlblBvcHVwKG5hbWUsIGxpbmspIHtcclxuICAgICAgICB0aGlzLl9jYXB0aW9uUG9wdXAudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltZ1BvcHVwLnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5faW1nUG9wdXAuYWx0ID0gYNCk0L7RgtC+OiAke25hbWV9YDtcclxuXHJcbiAgICAgICAgc3VwZXIub3BlblBvcHVwKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7bmFtZSwgYWJvdXQsIHVzZXJBdmF0YXJ9KSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0KTtcclxuICAgICAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICB0aGlzLl91c2VyRGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICB1c2VySW5mbzogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCxcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VyQXZhdGFyKHVybCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gdXJsLmF2YXRhcjtcclxuICAgICAgICBcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwe1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwge2hhbmRsZVN1Ym1pdH0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnQgPSB0aGlzLl9zZXRFdmVudC5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVN1Ym1pdENvbmZpcm0oc3VibWl0Q29uZmlybSkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IHN1Ym1pdENvbmZpcm07XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50KGV2dCkge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW5Qb3B1cCgpIHtcclxuICAgICAgICBzdXBlci5vcGVuUG9wdXAoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9zZXRFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VQb3B1cCgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5fc2V0RXZlbnQpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLl91cmwgPSBvcHRpb25zLnVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVVc2VySW5mbyhkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFkZENhcmQoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgbGluazogZGF0YS5saW5rLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZExpa2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkZWxldGVMaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2hhbmdlVXNlckF2YXRhcihkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gICAgICB9XHJcbn0iLCIgIC8vdmFsaWRhdGlvbiBzZWxlY3RvcnNcclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fZGlzYWJsZWQnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICBlcnJvckNsYXNzOiAncG9wdXBfZXJyb3JfdmlzaWJsZSdcclxufTtcclxuXHJcbi8vIGVkaXRzXHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0LWZvcm0nKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0RWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfbmFtZScpO1xyXG5leHBvcnQgY29uc3QgaW5wdXRBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfam9iJyk7XHJcblxyXG4vL2FkZCBjYXJkc1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkLWZvcm0nKTtcclxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcblxyXG4vL2F2YXRhciBcclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2F2YXRhci1mb3JtJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1hdmF0YXItYnV0dG9uJyk7IiwiaW1wb3J0ICcuLi9pbmRleC5odG1sJztcclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5cclxuaW1wb3J0IENhcmQgIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcydcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcblxyXG5pbXBvcnQgeyBcclxuICAgIHZhbGlkYXRpb25Db25maWcsXHJcbiAgICBlZGl0QnV0dG9uLFxyXG4gICAgcG9wdXBFZGl0LFxyXG4gICAgcG9wdXBBZGRDYXJkLFxyXG4gICAgYWRkQnV0dG9uLFxyXG4gICAgdXBkYXRlQXZhdGFyLFxyXG4gICAgYXZhdGFyQnV0dG9uLFxyXG4gICAgaW5wdXRFZGl0LFxyXG4gICAgaW5wdXRBYm91dFxyXG4gfSBmcm9tICcuLi91dGlsaXRzL2NvbnN0YW50cy5qcyc7XHJcblxyXG4gLy9sb2cgYXBpXHJcbiBjb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICAgIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDknLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246ICc1OWY2YTFhZS0wMzg0LTQ5OWUtYWViYi1mNGNiMmQwNDQzYzAnLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxuIH0pXHJcblxyXG4gbGV0IHVzZXJJZCA9IG51bGw7XHJcblxyXG4vLyBjcmVhdGlvbiBvZiBjYXJkcyBmcm0gY29uc3RhbnRzXHJcbmNvbnN0IGNhcmRQaG90b3MgPSBuZXcgU2VjdGlvbihcclxuICAgIHtcclxuICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtcykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChpdGVtcyk7XHJcbiAgICAgICAgICAgIGNhcmRQaG90b3MuYWRkSXRlbShuZXdDYXJkKTtcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgICcuZWxlbWVudHNfX2NhcmQnXHJcbik7XHJcblxyXG4vLyB1c2VySU5GT1xyXG5jb25zdCB1c2VyRGF0YSA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICBuYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxyXG4gICAgYWJvdXQ6ICcucHJvZmlsZV9fYWJvdXQnLFxyXG4gICAgdXNlckF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInXHJcbn0pO1xyXG5cclxuLy8gc2V0IHZhbGlkYXRpb24gb24gaW5wdXQtZm9ybXNcclxuY29uc3QgZm9ybUVkaXRQcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBFZGl0KTtcclxuZm9ybUVkaXRQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGZvcm1BZGRDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBBZGRDYXJkKTtcclxuZm9ybUFkZENhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgZm9ybUF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHVwZGF0ZUF2YXRhcik7XHJcbmZvcm1BdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gcG9wdXAgZnVsbHNjcmVlbiBwaG90b1xyXG5jb25zdCBwb3B1cEZ1bGxzY3JlZW5QaG90byA9IG5ldyBQb3B1cFdpdGhJbWFnZSAoJy5wb3B1cF90eXBlX2Z1bGxzY3JlZW4tcGhvdG8nKTtcclxucG9wdXBGdWxsc2NyZWVuUGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vcG9wdXAgd2l0aCB1c2VyIHByb2ZpbGVcclxuY29uc3QgcG9wdXBFZGl0Rm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0LWZvcm0nLCB7XHJcbiAgICBzdWJtaXRGb3JtSGFuZGxlcjogKGRhdGEpID0+IHtcclxuICAgICAgICBwb3B1cEVkaXRGb3JtLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgYXBpLnVwZGF0ZVVzZXJJbmZvKGRhdGEpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHVzZXJEYXRhLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICAgICAgICAgICAgICBwb3B1cEVkaXRGb3JtLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvcHVwRWRpdEZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICB9KTtcclxuXHJcbi8vIGZpbGwgaW5wdXRzIG9mIGVkaXRcclxuZnVuY3Rpb24gZWRpdFByb2ZpbGUoKSB7XHJcbiAgICBjb25zdCB1c2VySW5wdXQgPSB1c2VyRGF0YS5nZXRVc2VySW5mbygpO1xyXG4gICAgaW5wdXRFZGl0LnZhbHVlID0gdXNlcklucHV0LnVzZXJOYW1lO1xyXG4gICAgaW5wdXRBYm91dC52YWx1ZSA9IHVzZXJJbnB1dC51c2VySW5mbztcclxufVxyXG5cclxucG9wdXBFZGl0Rm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgZWRpdFByb2ZpbGUoKTtcclxuICAgIHBvcHVwRWRpdEZvcm0ub3BlblBvcHVwKCk7XHJcbiAgICBmb3JtRWRpdFByb2ZpbGVWYWxpZGF0b3IucmVtb3ZlSW5wdXRFcnJvcnMoKTtcclxufSk7XHJcblxyXG4vL3BvcHVwIHdpdGggdXNlciBhZGQtZm9ybSBjYXJkXHJcbmNvbnN0IHBvcHVwQWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtICgnLnBvcHVwX3R5cGVfYWRkLWZvcm0nLCAge1xyXG4gICAgc3VibWl0Rm9ybUhhbmRsZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgcG9wdXBBZGRGb3JtLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgYXBpLmFkZENhcmQoZGF0YSlcclxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgY2FyZFBob3Rvcy5hZGRJdGVtKGNhcmQpO1xyXG4gICAgICAgICAgICAgICAgcG9wdXBBZGRGb3JtLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvcHVwQWRkRm9ybS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuICAgIFxyXG59KTtcclxuXHJcbnBvcHVwQWRkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBmb3JtQWRkQ2FyZFZhbGlkYXRvci5yZW1vdmVJbnB1dEVycm9ycygpO1xyXG4gICAgcG9wdXBBZGRGb3JtLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuXHJcblxyXG4vL3BvcHVwIHdpdGggYXZhdGFyIGNoYW5naW5nIGZvcm1cclxuY29uc3QgcG9wdXBTZXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSAoJy5wb3B1cF90eXBlX2F2YXRhci1mb3JtJywge1xyXG4gICAgc3VibWl0Rm9ybUhhbmRsZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgcG9wdXBTZXRBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgICAgICBhcGkuY2hhbmdlVXNlckF2YXRhcihkYXRhKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyRGF0YS5zZXRVc2VyQXZhdGFyKHJlcyk7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFNldEF2YXRhci5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFNldEF2YXRhci5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxufSk7XHJcblxyXG5wb3B1cFNldEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBwb3B1cFNldEF2YXRhci5vcGVuUG9wdXAoKTtcclxuICAgIGZvcm1BdmF0YXJWYWxpZGF0b3IucmVtb3ZlSW5wdXRFcnJvcnMoKTtcclxufSk7XHJcblxyXG5cclxuLy9kZWxldGlvbiBhcHByb3ZlbWVudCBvZiBjYXJkXHJcbmNvbnN0IHBvcHVwRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKCcucG9wdXBfdHlwZV9kZWxldGUtY2FyZCcsIHtcclxuICAgIGhhbmRsZVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgICAgICBhcGkuZGVsZXRlQ2FyZChkYXRhKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxufSk7XHJcblxyXG5wb3B1cERlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIHByb21pc2VcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4udGhlbigoW3VzZXJJbmZvLCBpdGVtc10pID0+IHtcclxuICAgIHVzZXJJZCA9IHVzZXJJbmZvLl9pZDtcclxuICAgIFxyXG4gICAgdXNlckRhdGEuc2V0VXNlckluZm8odXNlckluZm8pO1xyXG4gICAgXHJcbiAgICB1c2VyRGF0YS5zZXRVc2VyQXZhdGFyKHVzZXJJbmZvKTtcclxuXHJcbiAgICBjYXJkUGhvdG9zLnJlbmRlckl0ZW1zKGl0ZW1zLnJldmVyc2UoKSk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG59KTtcclxuXHJcbi8vIHRvIGFkZCBjYXJkc1xyXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICAgICAgZGF0YSwgdXNlcklkLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBGdWxsc2NyZWVuUGhvdG8ub3BlblBvcHVwKGRhdGEubmFtZSwgZGF0YS5saW5rKTtcclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBwb3B1cERlbGV0ZUNhcmQub3BlblBvcHVwKCk7XHJcbiAgICAgICAgcG9wdXBEZWxldGVDYXJkLmhhbmRsZVN1Ym1pdENvbmZpcm0oKCkgPT4ge1xyXG4gICAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLl9pZClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmRIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBEZWxldGVDYXJkLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZUxpa2VDYXJkOiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGNhcmQuaXNMaWtlZCgpKSB7XHJcbiAgICAgICAgICAgIGFwaS5kZWxldGVMaWtlKGNhcmQuX2lkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjYXJkLmRlbGV0ZUxpa2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXJkLnNldExpa2UoZGF0YS5saWtlcyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBpLmFkZExpa2UoY2FyZC5faWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcmQuYWRkTGlrZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcmQuc2V0TGlrZShkYXRhLmxpa2VzKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIH0sXHJcbiAgICAnLmNhcmQtdGVtcGxhdGUnKTtcclxucmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn0iXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsInVybCIsIm9wdGlvbnMiLCJTdHJpbmciLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImhhc2giLCJtYXliZU5lZWRRdW90ZXMiLCJ0ZXN0IiwiY29uY2F0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJuIiwiZ2V0dGVyIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwIiwiYiIsImRvY3VtZW50IiwiYmFzZVVSSSIsInNlbGYiLCJsb2NhdGlvbiIsImhyZWYiLCJfX19IVE1MX0xPQURFUl9JTVBPUlRfMF9fXyIsIlVSTCIsIl9fX0hUTUxfTE9BREVSX0lNUE9SVF8xX19fIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJ1c2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2FyZCIsImhhbmRsZURlbGV0ZUNsaWNrIiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJfYnRuTGlrZSIsImNsYXNzTGlzdCIsImFkZCIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9pZCIsIl9vd25lcklkIiwib3duZXIiLCJfdXNlcklkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNhcmQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9idG5EZWxldGUiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZEVsZW1lbnRJbWFnZSIsIl9saWtlc0NvdW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJzZXRMaWtlIiwiX2NoZWNrT3duTGlrZSIsIl9oaWRlRGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZpbmQiLCJ1c2VyIiwiaXNMaWtlZCIsImFkZExpa2UiLCJkZWxldGVMaWtlIiwibGVuZ3RoIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2J0blN1Ym1pdCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsImVycm9yTWVzc2FnZSIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9idXR0b25DbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VQb3B1cCIsInRhcmdldCIsImNvbnRhaW5zIiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtSGFuZGxlciIsIl9zdWJtaXRGb3JtSGFuZGxlciIsIl9wb3B1cEZvcm0iLCJfcG9wdXBJbnB1dCIsIl9idXR0b25TdWJtaXQiLCJfYnV0dG9uU3VibWl0VGV4dCIsIl91c2VyVmFsdWVzIiwidmFsdWUiLCJpc0xvYWRpbmciLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwiX2ltZ1BvcHVwIiwiX2NhcHRpb25Qb3B1cCIsIlVzZXJJbmZvIiwiYWJvdXQiLCJ1c2VyQXZhdGFyIiwiX3VzZXJOYW1lIiwiX3VzZXJKb2IiLCJfdXNlckF2YXRhciIsIl91c2VyRGF0YSIsInVzZXJOYW1lIiwidXNlckluZm8iLCJhdmF0YXIiLCJQb3B1cFdpdGhDb25maXJtIiwiaGFuZGxlU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsIl9zZXRFdmVudCIsInN1Ym1pdENvbmZpcm0iLCJBcGkiLCJfdXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiZWRpdEJ1dHRvbiIsInBvcHVwRWRpdCIsImlucHV0RWRpdCIsImlucHV0QWJvdXQiLCJwb3B1cEFkZENhcmQiLCJhZGRCdXR0b24iLCJ1cGRhdGVBdmF0YXIiLCJhdmF0YXJCdXR0b24iLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiY2FyZFBob3RvcyIsIm5ld0NhcmQiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInVzZXJEYXRhIiwiZm9ybUVkaXRQcm9maWxlVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImZvcm1BZGRDYXJkVmFsaWRhdG9yIiwiZm9ybUF2YXRhclZhbGlkYXRvciIsInBvcHVwRnVsbHNjcmVlblBob3RvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEVkaXRGb3JtIiwicmVuZGVyTG9hZGluZyIsInVwZGF0ZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwidXNlcklucHV0IiwiZ2V0VXNlckluZm8iLCJvcGVuUG9wdXAiLCJyZW1vdmVJbnB1dEVycm9ycyIsInBvcHVwQWRkRm9ybSIsImFkZENhcmQiLCJjYXJkIiwicG9wdXBTZXRBdmF0YXIiLCJjaGFuZ2VVc2VyQXZhdGFyIiwic2V0VXNlckF2YXRhciIsInBvcHVwRGVsZXRlQ2FyZCIsImRlbGV0ZUNhcmQiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiLCJoYW5kbGVTdWJtaXRDb25maXJtIiwiZGVsZXRlQ2FyZEhhbmRsZXIiLCJnZW5lcmF0ZUNhcmQiXSwic291cmNlUm9vdCI6IiJ9